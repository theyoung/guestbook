version: 2.1

jobs:
  build-frontend:
    docker:
      - image: circleci/node:13.8.0
    steps:
      - checkout
      - run:
          name: install php
          command: |
            sudo apt install php libapache2-mod-php
            sudo systemctl restart apache2
            echo php -v
      - run:
          name: phplint env setup
          command: |
            sudo npm i -g phplint
            phplint "php-redis/*.php"
  # setup-eks:

workflows:
  default:
    jobs:
      - build-frontend: #checkout php, lint php
          filters:
            branches:
              only: [circleci-project-setup]
      # - setup-eks #eks setup