version: 2.1

jobs:
  build-frontend:
    docker:
      - image: circleci/node:13.8.0
    steps:
      - checkout
      - run:
          name: install php
          command: |
            sudo apt install php7.3 php7.3-common php7.3-opcache php7.3-cli php7.3-gd php7.3-curl php7.3-mysql
            echo php -v
      - run:
          name: phplint env setup
          command: |
            sudo npm i -g phplint
            phplint "php-redis/*.php"
  # setup-eks:

workflows:
  default:
    jobs:
      - build-frontend: #checkout php, lint php
          filters:
            branches:
              only: [circleci-project-setup]
      # - setup-eks #eks setup